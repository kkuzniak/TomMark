import{g as i,M as u}from"./MainNavView-B7vIW0_a.js";import{C as c}from"./CustomEase-B_J1XQiY.js";import{A as d}from"./animation-CbANpda6.js";class m{constructor(e="",t={},s={},r="",l="",a=""){this.projIndex=e,this.mainTitles=t,this.subTitles=s,this.imageSrc=r,this.dragUrls=l,this.previewUrl=a}setupDefaultWork(){this.projIndex="1",this.mainTitles={first:"w.",sec:"_surdacka"},this.subTitles={first:{value:"fashion<br>designer",color:"#111111"},sec:"based:<br>warsaw,<br>poland"},this.imageSrc="/videos/land-1.mp4",this.dragUrls='["self","/TomMark/work_2","/TomMark/work_3","/TomMark/work_4"]',this.previewUrl="/work/preview/weronika-surdacka"}}class h{constructor(){}async getNextWork(e){return await fetch(`${e}`).then(t=>t.text()).then(t=>t)}parseNextWork(e){return new m(e.querySelector("#mainContainer").getAttribute("data-proj-index"),{first:{value:e.querySelector("#mainTitleFirst").innerHTML,posClass:e.querySelector("#mainContainer").getAttribute("data-headers-class")},sec:e.querySelector("#mainTitleSec").innerHTML},{first:{value:e.querySelector("#firstSubtitle").innerHTML,color:e.querySelector("#firstSubtitle").getAttribute("data-color"),posClass:e.querySelector("#mainContainer").getAttribute("data-headers-class")},sec:e.querySelector("#secSubtitle").innerHTML},e.querySelector("#image").getAttribute("src"),e.querySelector("#dragInput").getAttribute("data-work-url"),e.querySelector("#showPreview").getAttribute("href"))}}class p{constructor(){i.registerPlugin(c),c.create("cubic-bezier","0.22, 1, 0.36, 1"),this.elements={mainContainer:document.getElementById("mainContainer"),projNumber:document.getElementById("projNumber"),projIndex:document.getElementById("projIndex"),imageWrapper:document.getElementById("imageWrapper"),image:document.getElementById("image"),nav:document.querySelector(".nav"),socials:document.querySelector(".noSocials"),dragInput:document.getElementById("dragInput"),mainTitles:{container:document.querySelector(".content__menuSection__mainHeader"),first:document.getElementById("mainTitleFirst"),second:document.getElementById("mainTitleSec")},subTitles:{first:document.getElementById("firstSubtitle"),second:document.getElementById("secSubtitle")},showPreviewButton:document.getElementById("showPreview")},this.timelines={starterTl:this.starterTl(),readyTl:this.readyTl(),defaultTl:this.defaultTl()},this.workController=new h,this.events();const e=document.querySelector(".pageLoader");new d().loaderTl().play("start"),window.addEventListener("load",()=>{setTimeout(()=>{e.classList.remove("pageLoader--shown"),e.classList.add("pageLoader--hidden")},1e3)})}events(){["mousedown","touchstart"].forEach(e=>{this.elements.dragInput.addEventListener(e,()=>{this.timelines.starterTl.pause(),this.timelines.defaultTl.pause(),this.timelines.readyTl.play("start")})}),["mouseup","touchend"].forEach(e=>{this.elements.dragInput.addEventListener(e,()=>{const s=JSON.parse(this.elements.dragInput.dataset.workUrl)[this.elements.dragInput.value];s=="self"?(this.timelines.readyTl.pause(),this.timelines.defaultTl.play("start")):this.workController.getNextWork(s).then(r=>{const a=new DOMParser().parseFromString(r,"text/html"),o=this.workController.parseNextWork(a);history.pushState(JSON.stringify(o),null,s),this.update(o),this.timelines.readyTl.pause(),this.timelines.starterTl.play("start")})})}),window.addEventListener("popstate",e=>{const t=JSON.parse(e.state);if(t==null){const s=new m;s.setupDefaultWork(),this.update(s)}else this.update(t),this.timelines.readyTl.pause(),this.timelines.starterTl.play("start")})}starterTl(){const e=new i.timeline;return e.addLabel("start").fromTo(this.elements.image,1.6,{scaleY:1.176,opacity:0},{ease:"cubic-bezier",scaleY:1,opacity:1},"start").fromTo(this.elements.imageWrapper,1.6,{scaleY:.85},{ease:"cubic-bezier",scaleY:1},"start").fromTo([this.elements.socials,this.elements.nav,this.elements.projIndex],1.6,{opacity:0},{ease:"cubic-bezier",opacity:1},"start").fromTo(this.elements.mainTitles.first,1.6,{x:-200,opacity:0},{ease:"cubic-bezier",x:-35,opacity:1},"start").fromTo(this.elements.mainTitles.second,1.6,{x:200,opacity:0},{ease:"cubic-bezier",x:35,opacity:1},"start").fromTo(this.elements.subTitles.first,1.6,{opacity:0},{opacity:1},"start+=0.2").fromTo(this.elements.subTitles.second,1.6,{opacity:0},{opacity:1},"start+=0.7").fromTo(this.elements.projNumber,1.6,{y:100,opacity:0},{ease:"cubic-bezier",y:0,opacity:1},"start"),e}defaultTl(){const e=new i.timeline;return e.addLabel("start").to(this.elements.image,1.2,{ease:"cubic-bezier",scaleY:1},"start").to(this.elements.imageWrapper,1.2,{ease:"cubic-bezier",scaleY:1},"start").to(this.elements.projNumber,1.2,{ease:"cubic-bezier",y:0,opacity:1},"start").to(this.elements.mainTitles.first,1.2,{ease:"cubic-bezier",x:-35,opacity:1},"start").to(this.elements.mainTitles.second,1.2,{ease:"cubic-bezier",x:35,opacity:1},"start").to(".fadingElement",.3,{opacity:1},"start"),e.pause()}readyTl(){const e=new i.timeline;return e.addLabel("start").to(this.elements.image,1.2,{ease:"cubic-bezier",scaleY:1.176},"start").to(this.elements.imageWrapper,1.2,{ease:"cubic-bezier",scaleY:.85},"start").to(this.elements.projNumber,1.2,{ease:"cubic-bezier",y:100,opacity:0},"start").to(this.elements.mainTitles.first,.8,{ease:"cubic-bezier",x:-200,opacity:0},"start").to(this.elements.mainTitles.second,.8,{ease:"cubic-bezier",x:200,opacity:0},"start").to(".fadingElement",.3,{opacity:0},"start"),e.pause(),e}update(e){const t=this.elements.mainContainer.getAttribute("data-headers-class");this.elements.mainContainer.dataset.headersClass=e.mainTitles.first.posClass,this.elements.projIndex.innerHTML=`${e.projIndex}/4`,this.elements.projNumber.innerHTML=`project no. ${e.projIndex}`,this.elements.image.src=e.imageSrc,this.elements.mainTitles.first.innerHTML=e.mainTitles.first.value,this.elements.mainTitles.container.classList.remove(`content__menuSection__mainHeader--${t}`),this.elements.mainTitles.container.classList.add(`content__menuSection__mainHeader--${e.mainTitles.first.posClass}`),this.elements.mainTitles.second.innerHTML=e.mainTitles.sec,this.elements.subTitles.first.innerHTML=e.subTitles.first.value,this.elements.subTitles.first.classList.remove(`content__menuSection__subHeader--${t}`),this.elements.subTitles.first.classList.add(`content__menuSection__subHeader--${e.subTitles.first.posClass}`),this.elements.subTitles.first.style.color=e.subTitles.first.color,this.elements.subTitles.second.innerHTML=e.subTitles.sec,this.elements.dragInput.dataset.workUrl=e.dragUrls,this.elements.showPreviewButton.href=e.previewUrl}}document.addEventListener("DOMContentLoaded",()=>{new p,new u});
